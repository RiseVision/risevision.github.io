(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{0:function(e,a,t){"use strict";e.exports=t(108)},107:function(t,e){function n(e,a){return t.exports=n=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e},n(e,a)}t.exports=n},108:function(e,a,t){"use strict";
/** @license React v16.5.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m=t(76),n="function"==typeof Symbol&&Symbol.for,u=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,r=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,o=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112;n&&Symbol.for("react.placeholder");var f="function"==typeof Symbol&&Symbol.iterator;function d(e){for(var a=arguments.length-1,t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<a;n++)t+="&args[]="+encodeURIComponent(arguments[n+1]);!function(e,a,t,n,s,r,l,c){if(!e){if((e=void 0)===a)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=[t,n,s,r,l,c],i=0;(e=Error(a.replace(/%s/g,function(){return o[i++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",t)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j={};function y(e,a,t){this.props=e,this.context=a,this.refs=j,this.updater=t||E}function N(){}function b(e,a,t){this.props=e,this.context=a,this.refs=j,this.updater=t||E}y.prototype.isReactComponent={},y.prototype.setState=function(e,a){"object"!=typeof e&&"function"!=typeof e&&null!=e&&d("85"),this.updater.enqueueSetState(this,e,a,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},N.prototype=y.prototype;var w=b.prototype=new N;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var g={current:null,currentDispatcher:null},v=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function _(e,a,t){var n=void 0,s={},r=null,l=null;if(null!=a)for(n in void 0!==a.ref&&(l=a.ref),void 0!==a.key&&(r=""+a.key),a)v.call(a,n)&&!k.hasOwnProperty(n)&&(s[n]=a[n]);var c=arguments.length-2;if(1===c)s.children=t;else if(1<c){for(var o=Array(c),i=0;i<c;i++)o[i]=arguments[i+2];s.children=o}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===s[n]&&(s[n]=c[n]);return{$$typeof:u,type:e,key:r,ref:l,props:s,_owner:g.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===u}var S=/\/+/g,T=[];function x(e,a,t,n){if(T.length){var s=T.pop();return s.result=e,s.keyPrefix=a,s.func=t,s.context=n,s.count=0,s}return{result:e,keyPrefix:a,func:t,context:n,count:0}}function O(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,T.length<10&&T.push(e)}function P(e,a,t){return null==e?0:function e(a,t,n,s){var r=typeof a;"undefined"!==r&&"boolean"!==r||(a=null);var l=!1;if(null===a)l=!0;else switch(r){case"string":case"number":l=!0;break;case"object":switch(a.$$typeof){case u:case i:l=!0}}if(l)return n(s,a,""===t?"."+A(a,0):t),1;if(l=0,t=""===t?".":t+":",Array.isArray(a))for(var c=0;c<a.length;c++){var o=t+A(r=a[c],c);l+=e(r,o,n,s)}else if("function"==typeof(o=null===a||"object"!=typeof a?null:"function"==typeof(o=f&&a[f]||a["@@iterator"])?o:null))for(a=o.call(a),c=0;!(r=a.next()).done;)l+=e(r=r.value,o=t+A(r,c++),n,s);else"object"===r&&d("31","[object Object]"==(n=""+a)?"object with keys {"+Object.keys(a).join(", ")+"}":n,"");return l}(e,"",a,t)}function A(e,a){return"object"==typeof e&&null!==e&&null!=e.key?(t=e.key,n={"=":"=0",":":"=2"},"$"+(""+t).replace(/[=:]/g,function(e){return n[e]})):a.toString(36);var t,n}function q(e,a){e.func.call(e.context,a,e.count++)}function L(e,a,t){var n,s,r=e.result,l=e.keyPrefix;e=e.func.call(e.context,a,e.count++),Array.isArray(e)?R(e,r,t,function(e){return e}):null!=e&&(I(e)&&(s=l+(!(n=e).key||a&&a.key===e.key?"":(""+e.key).replace(S,"$&/")+"/")+t,e={$$typeof:u,type:n.type,key:s,ref:n.ref,props:n.props,_owner:n._owner}),r.push(e))}function R(e,a,t,n,s){var r="";null!=t&&(r=(""+t).replace(S,"$&/")+"/"),P(e,L,a=x(a,r,n,s)),O(a)}var $={Children:{map:function(e,a,t){if(null==e)return e;var n=[];return R(e,n,null,a,t),n},forEach:function(e,a,t){if(null==e)return e;P(e,q,a=x(null,null,a,t)),O(a)},count:function(e){return P(e,function(){return null},null)},toArray:function(e){var a=[];return R(e,a,null,function(e){return e}),a},only:function(e){return I(e)||d("143"),e}},createRef:function(){return{current:null}},Component:y,PureComponent:b,createContext:function(e,a){return void 0===a&&(a=null),(e={$$typeof:o,_calculateChangedBits:a,_currentValue:e,_currentValue2:e,Provider:null,Consumer:null,unstable_read:null}).Provider={$$typeof:c,_context:e},(e.Consumer=e).unstable_read=function(e,a){var t=g.currentDispatcher;return null===t&&d("277"),t.readContext(e,a)}.bind(null,e),e},forwardRef:function(e){return{$$typeof:h,render:e}},Fragment:s,StrictMode:r,unstable_AsyncMode:p,unstable_Profiler:l,createElement:_,cloneElement:function(e,a,t){null==e&&d("267",e);var n=void 0,s=m({},e.props),r=e.key,l=e.ref,c=e._owner;if(null!=a){void 0!==a.ref&&(l=a.ref,c=g.current),void 0!==a.key&&(r=""+a.key);var o=void 0;for(n in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),a)v.call(a,n)&&!k.hasOwnProperty(n)&&(s[n]=void 0===a[n]&&void 0!==o?o[n]:a[n])}if(1===(n=arguments.length-2))s.children=t;else if(1<n){o=Array(n);for(var i=0;i<n;i++)o[i]=arguments[i+2];s.children=o}return{$$typeof:u,type:e.type,key:r,ref:l,props:s,_owner:c}},createFactory:function(e){var a=_.bind(null,e);return a.type=e,a},isValidElement:I,version:"16.5.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:g,assign:m}},C=$;e.exports=C.default||C},109:function(e,a){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},16:function(a,e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?a.exports=n=function(e){return t(e)}:a.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(e)}a.exports=n},2:function(e,a){e.exports=function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}},4:function(e,a){function n(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,a,t){return a&&n(e.prototype,a),t&&n(e,t),e}},450:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",function(){return d}),t.d(a,"default",function(){return E});var n=t(2),s=t.n(n),r=t(4),l=t.n(r),c=t(6),o=t.n(c),i=t(5),m=t.n(i),u=t(7),p=t.n(u),h=t(0),f=t.n(h),d={},E=function(e){function a(){return s()(this,a),o()(this,m()(a).apply(this,arguments))}return p()(a,e),l()(a,[{key:"render",value:function(){var e=this.props;return f.a.createElement("div",null,f.a.createElement("h1",{id:"inspecting-transactions"},"Inspecting Transactions"),f.a.createElement("p",null,"The blockchain provides complete transparency in what happens on the network. This provides us with a lot of tooling and ability to explore the blockchain and see what is happening. To give an example, let us imagine we want to build a Dashboard for users to look at all of the transactions coming into their account and going out of their account. Let's build a small javascript function to list all of the transactions involving an account."),f.a.createElement("h2",{id:"requirements"},"Requirements"),f.a.createElement("p",null,"All we need to interact with the blockchain here and pull information is the",f.a.createElement("code",null,"risejs")," JavaScript client which we can install simply with ",f.a.createElement("code",null,"npm install risejs")),f.a.createElement("h2",{id:"querying-transactions"},"Querying Transactions"),f.a.createElement("p",null,"To query the transaction database we need to send a query object to a node using the REST API. To start we have to include the library"),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},f.a.createElement("span",{className:"hljs-keyword"},"var")," rise = ",f.a.createElement("span",{className:"hljs-built_in"},"require"),"(",f.a.createElement("span",{className:"hljs-string"},"'risejs'"),").rise","\n")),f.a.createElement("p",null,"This will create an API Wrapper for a node on the Mainnet. If we wanted to monitor a different node or network we would have to set our node address"),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},"rise.nodeAddress = ",f.a.createElement("span",{className:"hljs-string"},"'http://localhost:5566'"),"\n")),f.a.createElement("p",null,"We can now use the Transactions API's ",f.a.createElement("code",null,"getList")," function to get a List of transactions. ",f.a.createElement("code",null,"getList")," returns a Promise, and we can retrieve the result by calling ",f.a.createElement("code",null,"then")," on our Promise."),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},"rise.transactions.getList()","                    ",f.a.createElement("span",{className:"hljs-comment"},"// make query request"),"\n","    ",".then(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"res"),") "),"{"," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".log(res); ","}",") ",f.a.createElement("span",{className:"hljs-comment"},"// print results"),"\n")),f.a.createElement("p",null,"We should hopefully now see a long list of transactions and a count of transactions found in the database"),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-json"},"{","\n","    ",f.a.createElement("span",{className:"hljs-attr"},'"success"'),": ",f.a.createElement("span",{className:"hljs-literal"},"true"),",","\n","    ",f.a.createElement("span",{className:"hljs-attr"},'"count"'),": ",f.a.createElement("span",{className:"hljs-number"},"591344"),",","\n","    ",f.a.createElement("span",{className:"hljs-attr"},'"transactions"'),": [ ",f.a.createElement("span",{className:"hljs-number"},"100")," Transactions ]","\n","}","\n")),f.a.createElement("h2",{id:"error-handling"},"Error Handling"),f.a.createElement("p",null,"There are two types of errors that can occur with our request: an application Error and a network Error. An application error occurs when we provide data that the node does not understand or does not fit the schema. A network error may occur when our request doesn't reach our server possibly due to poor connection, or if the node is offline. We have to handle these errors differently. First let's start with a network error. Network errors are automatically rejected in our callback, and therefore we have to catch them with the ",f.a.createElement("code",null,"catch")," function."),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},"rise.transactions.getList()","\n","    ",".then(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"res"),") "),"{"," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".log(res); ","}",")","\n","    ",".catch(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"err"),") "),"{"," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(err); ","}",") ",f.a.createElement("span",{className:"hljs-comment"},"// handle network error"),"\n")),f.a.createElement("p",null,"Application errors get returned in the response object in the format"),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-json"},"{","\n","    ",f.a.createElement("span",{className:"hljs-attr"},'"success"'),": ",f.a.createElement("span",{className:"hljs-literal"},"false"),",","\n","    ",f.a.createElement("span",{className:"hljs-attr"},'"error"'),": ",f.a.createElement("span",{className:"hljs-string"},'"Error message"'),"\n","}","\n")),f.a.createElement("p",null,"So to handle any application errors we can simply check the ",f.a.createElement("code",null,"success")," property on the response object and handle the error message"),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},"rise.transactions.getList()","\n","    ",".then(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"res"),") "),"{","\n","        ",f.a.createElement("span",{className:"hljs-keyword"},"if")," (!res.success) ","{","\n","            ",f.a.createElement("span",{className:"hljs-keyword"},"return")," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(res.error); ",f.a.createElement("span",{className:"hljs-comment"},"// handle application error"),"\n","        ","}","\n","        ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".log(res);","                    ",f.a.createElement("span",{className:"hljs-comment"},"// handle success"),"\n","    ","}",")","\n","    ",".catch(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"err"),") "),"{"," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(err); ","}",")","\n")),f.a.createElement("h2",{id:"query-parameters"},"Query Parameters"),f.a.createElement("p",null,"Of course what we have so far simply lists 100 random transactions from the network. Our dashboard should just show the transactions relevant to our account, so let's go ahead and scope the transactions we are looking at by filtering them by either ",f.a.createElement("code",null,"senderId")," or ",f.a.createElement("code",null,"recipientId"),". For example sake let's use our account from ",f.a.createElement(e.Link,{href:"undefined"},"Creating an Account"),", ",f.a.createElement("code",null,"35285700575243917R"),"."),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},f.a.createElement("span",{className:"hljs-keyword"},"var")," accountId = ",f.a.createElement("span",{className:"hljs-string"},'"35285700575243917R"'),"\n")),f.a.createElement("p",null,"To filter the list of transactions by ",f.a.createElement("code",null,"accountId"),", we can use the ",f.a.createElement("code",null,"getList"),"query parameter"),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},"rise.transactions.getList(","{","\n","        ",f.a.createElement("span",{className:"hljs-attr"},"senderId"),": accountId,","      ",f.a.createElement("span",{className:"hljs-comment"},"// filter by senderId"),"\n","        ","recipientId: recipientId","  ",f.a.createElement("span",{className:"hljs-comment"},"// or by recipientId"),"\n","    ","}",")","\n","    ",".then(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"res"),") "),"{","\n","        ",f.a.createElement("span",{className:"hljs-keyword"},"if")," (!res.success) ","{","\n","            ",f.a.createElement("span",{className:"hljs-keyword"},"return")," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(res.error);","\n","        ","}","\n","        ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".log(res);","\n","    ","}",")","\n","    ",".catch(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"err"),") "),"{"," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(err); ","}",")","\n")),f.a.createElement("p",null,"This is a fairly simple query, but we can get more complicated. Refer to ",f.a.createElement(e.Link,{href:"operation/TransactionsAPI.getTransactions"},"The REST API documentation")," for the list of possible query parameters. From our query we should get a result similar to the following if our account has transactions."),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-json"},"{","\n","    ","success: ",f.a.createElement("span",{className:"hljs-literal"},"true"),",","\n","    ","count: ",f.a.createElement("span",{className:"hljs-number"},"234"),",","\n","    ","transactions: [ ",f.a.createElement("span",{className:"hljs-number"},"100")," Transactions ]","\n","}","\n")),f.a.createElement("h2",{id:"looping-through-transactions"},"Looping Through Transactions"),f.a.createElement("p",null,"As you may have noticed from the result above, the ",f.a.createElement("code",null,"count")," and the number of transactions that were returned do not match up. That is because the count represents the total number of transactions found, but those that are returned are limited by a ",f.a.createElement("code",null,"limit")," parameter (in this case set to the default of 100). To get this we need to use an ",f.a.createElement("code",null,"offset")," to get the next 100 items."),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},"rise.transactions.getList(","{","\n","        ",f.a.createElement("span",{className:"hljs-attr"},"senderId"),": accountId,","\n","        ",f.a.createElement("span",{className:"hljs-attr"},"recipientId"),": recipientId,","\n","        ",f.a.createElement("span",{className:"hljs-attr"},"orderBy"),": ",f.a.createElement("span",{className:"hljs-string"},'"timestamp:asc"'),", ",f.a.createElement("span",{className:"hljs-comment"},"// get transactions in order created"),"\n","        ","offset: ",f.a.createElement("span",{className:"hljs-number"},"100"),"               ",f.a.createElement("span",{className:"hljs-comment"},"// get the next 100 transactions"),"\n","    ","}",")","\n","    ",".then(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"res"),") "),"{","\n","        ",f.a.createElement("span",{className:"hljs-keyword"},"if")," (!res.success) ","{","\n","            ",f.a.createElement("span",{className:"hljs-keyword"},"return")," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(res.error);","\n","        ","}","\n","        ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".log(res);","\n","    ","}",")","\n","    ",".catch(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"err"),") "),"{"," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(err); ","}",")","\n")),f.a.createElement("p",null,"Of course we can make this much more reusable by wrapping the whole thing in a function"),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function")," ",f.a.createElement("span",{className:"hljs-title"},"getAccountTransactions"),"(",f.a.createElement("span",{className:"hljs-params"},"accountId, offset"),") "),"{","\n","    ","offset = offset || ",f.a.createElement("span",{className:"hljs-number"},"0"),"; ",f.a.createElement("span",{className:"hljs-comment"},"// allow offset to be optional"),"\n","    ","rise.transactions.getList(","{","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"senderId"),": accountId,","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"recipientId"),": recipientId,","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"orderBy"),": ",f.a.createElement("span",{className:"hljs-string"},'"timestamp:asc"'),",","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"offset"),": offset","\n","        ","}",")","\n","        ",".then(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"res"),") "),"{","\n","            ",f.a.createElement("span",{className:"hljs-keyword"},"if")," (!res.success) ","{","\n","                ",f.a.createElement("span",{className:"hljs-keyword"},"return")," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(res.error);","\n","            ","}","\n","            ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".log(res);","\n","        ","}",")","\n","        ",".catch(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"err"),") "),"{"," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(err); ","}",")","\n","}","\n","\n","getAccountTransactions(accountId);","      ",f.a.createElement("span",{className:"hljs-comment"},"// get first 100 transactions"),"\n","getAccountTransactions(accountId, ",f.a.createElement("span",{className:"hljs-number"},"100"),"); ",f.a.createElement("span",{className:"hljs-comment"},"// get next 100 transactions"),"\n")),f.a.createElement("p",null,"But we want all of the transactions, not just the first 200. Let's use recursion to fetch more transactions. If the query returns a list of transactions, we'll simply call it again to see if there are more available to us, and we'll stop if there aren't."),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function")," ",f.a.createElement("span",{className:"hljs-title"},"getAccountTransactions"),"(",f.a.createElement("span",{className:"hljs-params"},"accountId, offset"),") "),"{","\n","    ","offset = offset || ",f.a.createElement("span",{className:"hljs-number"},"0"),";","\n","    ","rise.transactions.getList(","{","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"senderId"),": accountId,","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"recipientId"),": recipientId,","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"orderBy"),": ",f.a.createElement("span",{className:"hljs-string"},'"timestamp:asc"'),",","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"offset"),": offset","\n","        ","}",")","\n","        ",".then(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"res"),") "),"{","\n","            ",f.a.createElement("span",{className:"hljs-keyword"},"if")," (!res.success) ","{","\n","                ",f.a.createElement("span",{className:"hljs-keyword"},"return")," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(res.error);","\n","            ","}","\n","            ",f.a.createElement("span",{className:"hljs-keyword"},"if")," (res.transactions.length > ",f.a.createElement("span",{className:"hljs-number"},"0"),") ","{"," ",f.a.createElement("span",{className:"hljs-comment"},"// check if transactions returned"),"\n","                ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".log(res);","              ",f.a.createElement("span",{className:"hljs-comment"},"// handle result"),"\n","                ","getAccountTransactions(","        ",f.a.createElement("span",{className:"hljs-comment"},"// get next batch of transactions"),"\n","                    ","accountId,","\n","                    ","offset + res.transactions.length","\n","                ",");","\n","            ","}","\n","            ",f.a.createElement("span",{className:"hljs-comment"},"// no transactions returned therefore recursion ends"),"\n","        ","}",")","\n","        ",".catch(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"err"),") "),"{"," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(err); ","}",")","\n","}","\n","\n","getAccountTransactions(accountId);","\n")),f.a.createElement("p",null,"This should give us all of our transactions in batches of up to 100 at a time! Now we can display all of our users transactions to our user in their dashboard."),f.a.createElement("h2",{id:"polling-new-transactions"},"Polling New Transactions"),f.a.createElement("p",null,"But the blockchain is a dynamic network with transactions occuring all of the time. If a new transaction comes into the users wallet we want to let them know. Once we load the user's transaction history, let's poll the system for more transactions. We can build this into our recursive function fairly easily."),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function")," ",f.a.createElement("span",{className:"hljs-title"},"getAccountTransactions"),"(",f.a.createElement("span",{className:"hljs-params"},"accountId, offset"),") "),"{","\n","    ","offset = offset || ",f.a.createElement("span",{className:"hljs-number"},"0"),";","\n","    ","rise.transactions.getList(","{","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"senderId"),": accountId,","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"recipientId"),": recipientId,","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"orderBy"),": ",f.a.createElement("span",{className:"hljs-string"},'"timestamp:asc"'),",","\n","            ",f.a.createElement("span",{className:"hljs-attr"},"offset"),": offset","\n","        ","}",")","\n","        ",".then(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"res"),") "),"{","\n","            ",f.a.createElement("span",{className:"hljs-keyword"},"if")," (!res.success) ","{","\n","                ",f.a.createElement("span",{className:"hljs-keyword"},"return")," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(res.error);","\n","            ","}","\n","            ",f.a.createElement("span",{className:"hljs-keyword"},"if")," (res.transactions.length > ",f.a.createElement("span",{className:"hljs-number"},"0"),") ","{","\n","                ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".log(res);","\n","                ","getAccountTransactions(","\n","                    ","accountId,","\n","                    ","offset + res.transactions.length","\n","                ",");","\n","            ","}","\n","            ","setTimeout(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"}),") "),"{","\n","                ","getAccountTransactions(accountId, offset); ",f.a.createElement("span",{className:"hljs-comment"},"// try our query again"),"\n","            ","}",", ",f.a.createElement("span",{className:"hljs-number"},"5000"),");","                                      ",f.a.createElement("span",{className:"hljs-comment"},"// but delay it by 5 seconds"),"\n","        ","}",")","\n","        ",".catch(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-keyword"},"function"),"(",f.a.createElement("span",{className:"hljs-params"},"err"),") "),"{"," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(err); ","}",")","\n","}","\n","\n","getAccountTransactions(accountId);","\n")),f.a.createElement("p",null,"Done! We've just built a live transaction feed in a few lines of JavaScript!"),f.a.createElement("h2",{id:"bonus-await--async-syntax"},"Bonus: Await / Async Syntax"),f.a.createElement("p",null,"Because ",f.a.createElement("code",null,"risejs")," is built upon modern TypeScript and ES6 libraries we can use modern ES6 functionality represent our recursive function as a simple loop. Here's an example of using ",f.a.createElement("code",null,"async")," / ",f.a.createElement("code",null,"await")," syntax to list transactions and poll for new ones."),f.a.createElement("pre",null,f.a.createElement("code",{className:"hljs language-javascript"},f.a.createElement("span",{className:"hljs-keyword"},"const")," delay = ",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-params"},"ms")," =>")," ",f.a.createElement("span",{className:"hljs-keyword"},"new")," ",f.a.createElement("span",{className:"hljs-built_in"},"Promise"),"(",f.a.createElement("span",{className:"hljs-function"},f.a.createElement("span",{className:"hljs-params"},"resolve")," =>")," setTimeout(resolve, ms));","\n","\n",f.a.createElement("span",{className:"hljs-keyword"},"const")," getAccountTransactions = ",f.a.createElement("span",{className:"hljs-keyword"},"async")," accountId => ","{","\n","  ",f.a.createElement("span",{className:"hljs-keyword"},"let")," offset = ",f.a.createElement("span",{className:"hljs-number"},"0"),";","\n","  ",f.a.createElement("span",{className:"hljs-keyword"},"while")," (",f.a.createElement("span",{className:"hljs-literal"},"true"),") ","{","\n","    ",f.a.createElement("span",{className:"hljs-keyword"},"try")," ","{","\n","      ",f.a.createElement("span",{className:"hljs-keyword"},"const")," res = ",f.a.createElement("span",{className:"hljs-keyword"},"await")," rise.transactions.getList(","{","\n","        ",f.a.createElement("span",{className:"hljs-attr"},"orderBy"),": ",f.a.createElement("span",{className:"hljs-string"},'"timestamp:asc"'),",","\n","        ",f.a.createElement("span",{className:"hljs-attr"},"offset"),": offset,","\n","        ",f.a.createElement("span",{className:"hljs-attr"},"senderId"),": accountId,","\n","        ",f.a.createElement("span",{className:"hljs-attr"},"recipientId"),": accountId","\n","      ","}",");","\n","      ",f.a.createElement("span",{className:"hljs-keyword"},"if")," (!res.success) ","{","\n","        ",f.a.createElement("span",{className:"hljs-keyword"},"return")," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(res.error);","\n","      ","}","\n","      ",f.a.createElement("span",{className:"hljs-keyword"},"if")," (res.transactions.length > ",f.a.createElement("span",{className:"hljs-number"},"0"),") ","{","\n","        ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".log(res.transactions);","\n","        ","offset += res.transactions.length;","\n","      ","}"," ",f.a.createElement("span",{className:"hljs-keyword"},"else")," ","{","\n","        ",f.a.createElement("span",{className:"hljs-keyword"},"await")," delay(",f.a.createElement("span",{className:"hljs-number"},"5000"),");","\n","      ","}","\n","    ","}"," ",f.a.createElement("span",{className:"hljs-keyword"},"catch")," (err) ","{","\n","      ",f.a.createElement("span",{className:"hljs-keyword"},"return")," ",f.a.createElement("span",{className:"hljs-built_in"},"console"),".error(err);","\n","    ","}","\n","  ","}","\n","}",";","\n","\n","getAccountTransactions(accountId);","\n")))}}]),a}(f.a.PureComponent)},5:function(a,e){function t(e){return a.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(e)}a.exports=t},6:function(e,a,t){var n=t(16),s=t(109);e.exports=function(e,a){return!a||"object"!==n(a)&&"function"!=typeof a?s(e):a}},7:function(e,a,t){var n=t(107);e.exports=function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&n(e,a)}},76:function(e,a,t){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var a={},t=0;t<10;t++)a["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(e){return a[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var t,n,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),r=1;r<arguments.length;r++){for(var l in t=Object(arguments[r]))i.call(t,l)&&(s[l]=t[l]);if(o){n=o(t);for(var c=0;c<n.length;c++)m.call(t,n[c])&&(s[n[c]]=t[n[c]])}}return s}}}]);